public class tw.com.soyong.LocalService extends android.app.Service
{
    private static final boolean DEBUG;
    private static final int FRAME_PER_BUF;
    private static final int RING_BUF_SIZE;
    private static final int SAMPLES_PER_FRAME;
    private static final java.lang.String TAG;
    public static final int TOLERANCE;
    private static tw.com.soyong.RingBuffer mBuf;
    android.media.AudioTrack a;
    long b;
    boolean c;
    private final android.os.IBinder mBinder;
    private volatile boolean mCreateDone;
    private tw.com.soyong.DecodeThread mDecThread;
    private int[] mFrameTable;
    private tw.com.soyong.PlayerThread mPlayThread;
    private int mSamplePerSec;
    private long mTotalFrams;
    public android.content.Intent ipcIntent;
    public android.os.IBinder ipcBinder_0;

    public void <init>()
    {
        tw.com.soyong.LocalService r0;
        tw.com.soyong.LocalService$LocalBinder $r1;

        r0 := @this: tw.com.soyong.LocalService;

        specialinvoke r0.<android.app.Service: void <init>()>();

        r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread> = null;

        r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread> = null;

        r0.<tw.com.soyong.LocalService: boolean mCreateDone> = 0;

        $r1 = new tw.com.soyong.LocalService$LocalBinder;

        specialinvoke $r1.<tw.com.soyong.LocalService$LocalBinder: void <init>(tw.com.soyong.LocalService)>(r0);

        r0.<tw.com.soyong.LocalService: android.os.IBinder mBinder> = $r1;

        r0.<tw.com.soyong.LocalService: boolean c> = 0;

        return;
    }

    public void destroy()
    {
        java.lang.Throwable $r4;
        tw.com.soyong.PlayerThread $r2;
        java.lang.InterruptedException $r5;
        tw.com.soyong.DecodeThread $r1;
        tw.com.soyong.LocalService r0;
        tw.com.soyong.RingBuffer $r3;

        r0 := @this: tw.com.soyong.LocalService;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread>;

        if $r1 == null goto label6;

        $r2 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        if $r2 == null goto label6;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread>;

        virtualinvoke $r1.<tw.com.soyong.DecodeThread: void shutdownRequest()>();

        $r2 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r2.<tw.com.soyong.PlayerThread: void shutdownRequest()>();

        $r3 = <tw.com.soyong.LocalService: tw.com.soyong.RingBuffer mBuf>;

        virtualinvoke $r3.<tw.com.soyong.RingBuffer: void clearAll()>();

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread>;

     label1:
        virtualinvoke $r1.<tw.com.soyong.DecodeThread: void join(long)>(500L);

     label2:
        $r2 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

     label3:
        virtualinvoke $r2.<tw.com.soyong.PlayerThread: void join(long)>(500L);

     label4:
        r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread> = null;

        r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread> = null;

        return;

     label5:
        $r4 := @caughtexception;

        $r5 = (java.lang.InterruptedException) $r4;

        virtualinvoke $r5.<java.lang.InterruptedException: void printStackTrace()>();

        goto label4;

     label6:
        return;

        catch java.lang.InterruptedException from label1 to label2 with label5;
        catch java.lang.InterruptedException from label3 to label4 with label5;
    }

    public int getCurrentPosition()
    {
        tw.com.soyong.PlayerThread $r1;
        int $i1;
        long $l0, $l2, $l3;
        tw.com.soyong.LocalService r0;

        r0 := @this: tw.com.soyong.LocalService;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        $l0 = virtualinvoke $r1.<tw.com.soyong.PlayerThread: long getFrameCount()>();

        $i1 = r0.<tw.com.soyong.LocalService: int mSamplePerSec>;

        $l2 = (long) $i1;

        $l0 = $l0 * 10L;

        $l0 = $l0 * 1152L;

        $l3 = $l2 >> 1;

        $l0 = $l0 + $l3;

        $l2 = $l0 / $l2;

        $l2 = $l2 * 100L;

        $i1 = (int) $l2;

        return $i1;
    }

    public boolean isInitial()
    {
        java.lang.Throwable $r1;
        tw.com.soyong.LocalService r0;
        boolean z0;

        r0 := @this: tw.com.soyong.LocalService;

        entermonitor r0;

     label1:
        z0 = r0.<tw.com.soyong.LocalService: boolean mCreateDone>;

     label2:
        exitmonitor r0;

        return z0;

     label3:
        $r1 := @caughtexception;

        exitmonitor r0;

        throw $r1;

        catch java.lang.Throwable from label1 to label2 with label3;
    }

    public boolean isPlaying()
    {
        tw.com.soyong.LocalService r0;
        boolean z0;

        r0 := @this: tw.com.soyong.LocalService;

        z0 = r0.<tw.com.soyong.LocalService: boolean c>;

        return z0;
    }

    public android.os.IBinder onBind(android.content.Intent)
    {
        android.content.Intent parameter0;
        tw.com.soyong.LocalService this;

        this := @this: tw.com.soyong.LocalService;

        parameter0 := @parameter0: android.content.Intent;

        parameter0 = virtualinvoke this.<tw.com.soyong.LocalService: android.content.Intent getIntent()>();

        this.<tw.com.soyong.LocalService: android.os.IBinder ipcBinder_0> = parameter0;

        this.<tw.com.soyong.LocalService: android.os.IBinder ipcBinder_0> = parameter0;

        this.<tw.com.soyong.LocalService: android.os.IBinder ipcBinder_0> = parameter0;

        this.<tw.com.soyong.LocalService: android.os.IBinder ipcBinder_0> = parameter0;

        this.<tw.com.soyong.LocalService: android.os.IBinder ipcBinder_0> = parameter0;

        return parameter0;
    }

    public void onCreate()
    {
        tw.com.soyong.DecodeThread $r4;
        tw.com.soyong.LocalService$MyPhoneStateListener $r6;
        long $l4;
        android.media.AudioTrack $r1;
        tw.com.soyong.PlayerThread $r5;
        byte $b1;
        int[] $r2;
        android.telephony.TelephonyManager $r8;
        int $i0, $i2, $i3;
        java.lang.Object $r7;
        tw.com.soyong.LocalService r0;
        tw.com.soyong.RingBuffer $r3;

        r0 := @this: tw.com.soyong.LocalService;

        $i0 = staticinvoke <tw.com.soyong.utility.Native: int getNumChannel()>();

        if 1 != $i0 goto label3;

        $b1 = 2;

     label1:
        $i2 = staticinvoke <tw.com.soyong.utility.Native: int getSamplePerSec()>();

        r0.<tw.com.soyong.LocalService: int mSamplePerSec> = $i2;

        $i3 = staticinvoke <android.media.AudioTrack: int getMinBufferSize(int,int,int)>($i2, $b1, 2);

        $i0 = $i0 * 2304;

        $r1 = new android.media.AudioTrack;

        specialinvoke $r1.<android.media.AudioTrack: void <init>(int,int,int,int,int,int)>(3, $i2, $b1, 2, $i3, 1);

        r0.<tw.com.soyong.LocalService: android.media.AudioTrack a> = $r1;

        $r2 = <tw.com.soyong.mebook.MebookHelper: int[] mFrameTable>;

        if $r2 == null goto label2;

        $r2 = <tw.com.soyong.mebook.MebookHelper: int[] mFrameTable>;

        r0.<tw.com.soyong.LocalService: int[] mFrameTable> = $r2;

     label2:
        $r2 = r0.<tw.com.soyong.LocalService: int[] mFrameTable>;

        $i2 = lengthof $r2;

        $i2 = $i2 << 2;

        $l4 = (long) $i2;

        r0.<tw.com.soyong.LocalService: long mTotalFrams> = $l4;

        $r3 = new tw.com.soyong.RingBuffer;

        specialinvoke $r3.<tw.com.soyong.RingBuffer: void <init>(int)>(4);

        <tw.com.soyong.LocalService: tw.com.soyong.RingBuffer mBuf> = $r3;

        $r4 = new tw.com.soyong.DecodeThread;

        $r3 = <tw.com.soyong.LocalService: tw.com.soyong.RingBuffer mBuf>;

        $i2 = $i0 << 2;

        specialinvoke $r4.<tw.com.soyong.DecodeThread: void <init>(tw.com.soyong.RingBuffer,int)>($r3, $i2);

        virtualinvoke $r4.<tw.com.soyong.DecodeThread: void setThreadPause(boolean)>(0);

        virtualinvoke $r4.<tw.com.soyong.DecodeThread: void start()>();

        r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread> = $r4;

        $r5 = new tw.com.soyong.PlayerThread;

        $r3 = <tw.com.soyong.LocalService: tw.com.soyong.RingBuffer mBuf>;

        $i0 = $i0 << 2;

        specialinvoke $r5.<tw.com.soyong.PlayerThread: void <init>(tw.com.soyong.RingBuffer,int,android.media.AudioTrack)>($r3, $i0, $r1);

        virtualinvoke $r5.<tw.com.soyong.PlayerThread: void setThreadPause(boolean)>(1);

        virtualinvoke $r5.<tw.com.soyong.PlayerThread: void start()>();

        r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread> = $r5;

        $r6 = new tw.com.soyong.LocalService$MyPhoneStateListener;

        specialinvoke $r6.<tw.com.soyong.LocalService$MyPhoneStateListener: void <init>(tw.com.soyong.LocalService)>(r0);

        $r7 = virtualinvoke r0.<tw.com.soyong.LocalService: java.lang.Object getSystemService(java.lang.String)>("phone");

        $r8 = (android.telephony.TelephonyManager) $r7;

        virtualinvoke $r8.<android.telephony.TelephonyManager: void listen(android.telephony.PhoneStateListener,int)>($r6, 32);

        r0.<tw.com.soyong.LocalService: boolean mCreateDone> = 1;

        return;

     label3:
        $b1 = 3;

        goto label1;
    }

    public void onDestroy()
    {
        tw.com.soyong.PlayerThread $r2;
        tw.com.soyong.DecodeThread $r1;
        tw.com.soyong.LocalService r0;
        android.media.AudioTrack $r3;

        r0 := @this: tw.com.soyong.LocalService;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread>;

        if $r1 == null goto label1;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread>;

        virtualinvoke $r1.<tw.com.soyong.DecodeThread: void shutdownRequest()>();

     label1:
        $r2 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        if $r2 == null goto label2;

        $r2 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r2.<tw.com.soyong.PlayerThread: void shutdownRequest()>();

     label2:
        $r3 = r0.<tw.com.soyong.LocalService: android.media.AudioTrack a>;

        if $r3 == null goto label3;

        $r3 = r0.<tw.com.soyong.LocalService: android.media.AudioTrack a>;

        virtualinvoke $r3.<android.media.AudioTrack: void stop()>();

        r0.<tw.com.soyong.LocalService: android.media.AudioTrack a> = null;

     label3:
        staticinvoke <tw.com.soyong.utility.Native: void Close()>();

        return;
    }

    public void pause()
    {
        tw.com.soyong.LocalService r0;
        tw.com.soyong.PlayerThread $r1;
        boolean $z0;

        r0 := @this: tw.com.soyong.LocalService;

        $z0 = r0.<tw.com.soyong.LocalService: boolean c>;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r1.<tw.com.soyong.PlayerThread: void setThreadPause(boolean)>($z0);

        if $z0 != 0 goto label2;

        $z0 = 1;

     label1:
        r0.<tw.com.soyong.LocalService: boolean c> = $z0;

        return;

     label2:
        $z0 = 0;

        goto label1;
    }

    public void play()
    {
        long $l0;
        tw.com.soyong.LocalService r0;
        tw.com.soyong.PlayerThread $r1;

        r0 := @this: tw.com.soyong.LocalService;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        $l0 = r0.<tw.com.soyong.LocalService: long b>;

        virtualinvoke $r1.<tw.com.soyong.PlayerThread: void setEndFrame(long)>($l0);

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r1.<tw.com.soyong.PlayerThread: void setThreadPause(boolean)>(0);

        r0.<tw.com.soyong.LocalService: boolean c> = 1;

        return;
    }

    public void play(int, int)
    {
        tw.com.soyong.PlayerThread $r1;
        int $i0, $i1;
        long $l2, $l3;
        tw.com.soyong.LocalService r0;

        r0 := @this: tw.com.soyong.LocalService;

        $i0 := @parameter0: int;

        $i1 := @parameter1: int;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r1.<tw.com.soyong.PlayerThread: void setThreadPause(boolean)>(1);

        virtualinvoke r0.<tw.com.soyong.LocalService: void seekTo(int)>($i0);

        $i0 = $i1 / 100;

        $i1 = r0.<tw.com.soyong.LocalService: int mSamplePerSec>;

        $i0 = $i0 * $i1;

        $i0 = $i0 / 1152;

        $i0 = $i0 / 10;

        $l2 = (long) $i0;

        $l3 = r0.<tw.com.soyong.LocalService: long mTotalFrams>;

        $l2 = staticinvoke <java.lang.Math: long min(long,long)>($l2, $l3);

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r1.<tw.com.soyong.PlayerThread: void setEndFrame(long)>($l2);

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r1.<tw.com.soyong.PlayerThread: void setThreadPause(boolean)>(0);

        r0.<tw.com.soyong.LocalService: boolean c> = 1;

        return;
    }

    public void seekTo(int)
    {
        java.lang.Throwable $r5;
        java.lang.IndexOutOfBoundsException $r6;
        tw.com.soyong.DecodeThread $r1;
        long $l1, $l3;
        tw.com.soyong.PlayerThread $r4;
        int[] $r2;
        java.lang.InterruptedException $r7;
        int $i0, $i2;
        tw.com.soyong.LocalService r0;
        tw.com.soyong.RingBuffer $r3;

        r0 := @this: tw.com.soyong.LocalService;

        $i0 := @parameter0: int;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread>;

        if $r1 != null goto label1;

        staticinvoke <android.util.Log: int e(java.lang.String,java.lang.String)>("LocalService", "mDecThread null !!!");

        return;

     label1:
        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread>;

        virtualinvoke $r1.<tw.com.soyong.DecodeThread: void setThreadPause(boolean)>(1);

        $i0 = $i0 / 100;

        $i2 = r0.<tw.com.soyong.LocalService: int mSamplePerSec>;

        $i0 = $i0 * $i2;

        $i0 = $i0 / 1152;

        $i0 = $i0 / 10;

        $l3 = (long) $i0;

        $l1 = r0.<tw.com.soyong.LocalService: long mTotalFrams>;

        $l1 = staticinvoke <java.lang.Math: long min(long,long)>($l3, $l1);

        $l1 = $l1 >> 2;

        $i0 = (int) $l1;

        $i2 = $i0 << 2;

        $l1 = (long) $i2;

        $r2 = r0.<tw.com.soyong.LocalService: int[] mFrameTable>;

     label2:
        $i0 = $r2[$i0];

     label3:
        $l3 = (long) $i0;

     label4:
        staticinvoke <tw.com.soyong.utility.Native: void seek(long)>($l3);

        $r3 = <tw.com.soyong.LocalService: tw.com.soyong.RingBuffer mBuf>;

        virtualinvoke $r3.<tw.com.soyong.RingBuffer: void clearAll()>();

        $r4 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r4.<tw.com.soyong.PlayerThread: void setFrameCount(long)>($l1);

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.DecodeThread mDecThread>;

        virtualinvoke $r1.<tw.com.soyong.DecodeThread: void setThreadPause(boolean)>(0);

        $r3 = <tw.com.soyong.LocalService: tw.com.soyong.RingBuffer mBuf>;

        $i0 = virtualinvoke $r3.<tw.com.soyong.RingBuffer: int getCount()>();

        if $i0 >= 2 goto label9;

     label5:
        staticinvoke <java.lang.Thread: void sleep(long)>(30L);

     label6:
        return;

     label7:
        $r5 := @caughtexception;

        $r7 = (java.lang.InterruptedException) $r5;

        virtualinvoke $r7.<java.lang.InterruptedException: void printStackTrace()>();

        return;

     label8:
        $r6 := @caughtexception;

        $l3 = 0L;

        goto label4;

     label9:
        return;

        catch java.lang.IndexOutOfBoundsException from label2 to label3 with label8;
        catch java.lang.InterruptedException from label5 to label6 with label7;
    }

    public void setEosTime(int)
    {
        int $i0, $i2;
        long $l1, $l3;
        tw.com.soyong.LocalService r0;

        r0 := @this: tw.com.soyong.LocalService;

        $i0 := @parameter0: int;

        if $i0 > 0 goto label1;

        $l1 = r0.<tw.com.soyong.LocalService: long mTotalFrams>;

        r0.<tw.com.soyong.LocalService: long b> = $l1;

        return;

     label1:
        $i2 = $i0 / 100;

        $i0 = r0.<tw.com.soyong.LocalService: int mSamplePerSec>;

        $i0 = $i2 * $i0;

        $i0 = $i0 / 1152;

        $i0 = $i0 / 10;

        $l3 = (long) $i0;

        $l1 = r0.<tw.com.soyong.LocalService: long mTotalFrams>;

        $l1 = staticinvoke <java.lang.Math: long min(long,long)>($l3, $l1);

        r0.<tw.com.soyong.LocalService: long b> = $l1;

        return;
    }

    public void setFrameTable(int[])
    {
        int[] $r1;
        int $i0;
        long $l1;
        tw.com.soyong.LocalService r0;

        r0 := @this: tw.com.soyong.LocalService;

        $r1 := @parameter0: int[];

        r0.<tw.com.soyong.LocalService: int[] mFrameTable> = $r1;

        $i0 = lengthof $r1;

        $i0 = $i0 << 2;

        $l1 = (long) $i0;

        r0.<tw.com.soyong.LocalService: long mTotalFrams> = $l1;

        return;
    }

    public void stop()
    {
        tw.com.soyong.LocalService r0;
        tw.com.soyong.PlayerThread $r1;

        r0 := @this: tw.com.soyong.LocalService;

        $r1 = r0.<tw.com.soyong.LocalService: tw.com.soyong.PlayerThread mPlayThread>;

        virtualinvoke $r1.<tw.com.soyong.PlayerThread: void setThreadPause(boolean)>(1);

        r0.<tw.com.soyong.LocalService: boolean c> = 0;

        return;
    }

    public android.content.Intent getIntent()
    {
        android.content.Intent $r0;
        tw.com.soyong.LocalService this;

        this := @this: tw.com.soyong.LocalService;

        $r0 = this.<tw.com.soyong.LocalService: android.content.Intent ipcIntent>;

        return $r0;
    }

    public static void <clinit>()
    {
        <tw.com.soyong.LocalService: int TOLERANCE> = 130;

        <tw.com.soyong.LocalService: java.lang.String TAG> = "LocalService";

        <tw.com.soyong.LocalService: int SAMPLES_PER_FRAME> = 1152;

        <tw.com.soyong.LocalService: int RING_BUF_SIZE> = 4;

        <tw.com.soyong.LocalService: int FRAME_PER_BUF> = 4;

        <tw.com.soyong.LocalService: boolean DEBUG> = 0;

        return;
    }
}
