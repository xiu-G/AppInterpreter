class cn.hi321.browser.model.DbAdapter$DatabaseHelper extends android.database.sqlite.SQLiteOpenHelper
{
    private cn.hi321.browser.model.DbAdapter mParent;

    public void <init>(android.content.Context, cn.hi321.browser.model.DbAdapter)
    {
        cn.hi321.browser.model.DbAdapter $r2;
        cn.hi321.browser.model.DbAdapter$DatabaseHelper r0;
        android.content.Context $r1;

        r0 := @this: cn.hi321.browser.model.DbAdapter$DatabaseHelper;

        $r1 := @parameter0: android.content.Context;

        $r2 := @parameter1: cn.hi321.browser.model.DbAdapter;

        specialinvoke r0.<android.database.sqlite.SQLiteOpenHelper: void <init>(android.content.Context,java.lang.String,android.database.sqlite.SQLiteDatabase$CursorFactory,int)>($r1, "ZIRCO", null, 6);

        r0.<cn.hi321.browser.model.DbAdapter$DatabaseHelper: cn.hi321.browser.model.DbAdapter mParent> = $r2;

        return;
    }

    private void exportOldBookmarks(android.database.sqlite.SQLiteDatabase)
    {
        android.content.Context $r5;
        java.lang.Object[] r2;
        java.util.Date $r12;
        java.lang.String[] $r7;
        long $l5;
        java.lang.Integer $r13;
        cn.hi321.browser.ui.runnables.XmlHistoryBookmarksExporter $r10;
        android.database.sqlite.SQLiteDatabase $r1;
        java.lang.Long $r14;
        java.lang.Thread $r9;
        int $i0, $i1, $i2, $i3, $i4;
        java.lang.String $r11;
        boolean $z0;
        android.database.Cursor $r8;
        java.lang.Exception r3;
        cn.hi321.browser.model.DbAdapter $r4;
        android.database.MatrixCursor r6;
        cn.hi321.browser.model.DbAdapter$DatabaseHelper r0;
        java.lang.StringBuilder $r15;

        r0 := @this: cn.hi321.browser.model.DbAdapter$DatabaseHelper;

        $r1 := @parameter0: android.database.sqlite.SQLiteDatabase;

        staticinvoke <android.util.Log: int i(java.lang.String,java.lang.String)>("DbAdapter", "Start export of old bookmarks.");

     label01:
        $r4 = r0.<cn.hi321.browser.model.DbAdapter$DatabaseHelper: cn.hi321.browser.model.DbAdapter mParent>;

        $r5 = staticinvoke <cn.hi321.browser.model.DbAdapter: android.content.Context access$0(cn.hi321.browser.model.DbAdapter)>($r4);

        $z0 = staticinvoke <cn.hi321.browser.utils.ApplicationUtils: boolean checkCardState(android.content.Context,boolean)>($r5, 0);

     label02:
        if $z0 == 0 goto label17;

     label03:
        staticinvoke <android.util.Log: int i(java.lang.String,java.lang.String)>("DbAdapter", "Export of old bookmarks: SDCard checked.");

     label04:
        r6 = null;

        $r7 = newarray (java.lang.String)[5];

     label05:
        $r7[0] = "_id";

        $r7[1] = "title";

        $r7[2] = "url";

        $r7[3] = "creation_date";

        $r7[4] = "count";

        $r8 = virtualinvoke $r1.<android.database.sqlite.SQLiteDatabase: android.database.Cursor query(java.lang.String,java.lang.String[],java.lang.String,java.lang.String[],java.lang.String,java.lang.String,java.lang.String)>("BOOKMARKS", $r7, null, null, null, null, null);

     label06:
        if $r8 == null goto label13;

     label07:
        $z0 = interfaceinvoke $r8.<android.database.Cursor: boolean moveToFirst()>();

     label08:
        if $z0 == 0 goto label12;

        r6 = new android.database.MatrixCursor;

        $r7 = newarray (java.lang.String)[6];

     label09:
        $r7[0] = "title";

        $r7[1] = "url";

        $r7[2] = "visits";

        $r7[3] = "date";

        $r7[4] = "created";

        $r7[5] = "bookmark";

        specialinvoke r6.<android.database.MatrixCursor: void <init>(java.lang.String[])>($r7);

        $i0 = interfaceinvoke $r8.<android.database.Cursor: int getColumnIndex(java.lang.String)>("title");

        $i1 = interfaceinvoke $r8.<android.database.Cursor: int getColumnIndex(java.lang.String)>("url");

        $i2 = interfaceinvoke $r8.<android.database.Cursor: int getColumnIndex(java.lang.String)>("creation_date");

        $i3 = interfaceinvoke $r8.<android.database.Cursor: int getColumnIndex(java.lang.String)>("count");

     label10:
        $z0 = interfaceinvoke $r8.<android.database.Cursor: boolean isAfterLast()>();

     label11:
        if $z0 == 0 goto label18;

     label12:
        interfaceinvoke $r8.<android.database.Cursor: void close()>();

     label13:
        if r6 == null goto label17;

     label14:
        staticinvoke <android.util.Log: int i(java.lang.String,java.lang.String)>("DbAdapter", "Export of old bookmarks: Writing file.");

     label15:
        $r9 = new java.lang.Thread;

        $r10 = new cn.hi321.browser.ui.runnables.XmlHistoryBookmarksExporter;

     label16:
        specialinvoke $r10.<cn.hi321.browser.ui.runnables.XmlHistoryBookmarksExporter: void <init>(android.content.Context,java.lang.String,android.database.Cursor,android.app.ProgressDialog)>(null, "auto-export.xml", r6, null);

        specialinvoke $r9.<java.lang.Thread: void <init>(java.lang.Runnable)>($r10);

        virtualinvoke $r9.<java.lang.Thread: void start()>();

     label17:
        staticinvoke <android.util.Log: int i(java.lang.String,java.lang.String)>("DbAdapter", "End of export of old bookmarks.");

        return;

     label18:
        $r4 = r0.<cn.hi321.browser.model.DbAdapter$DatabaseHelper: cn.hi321.browser.model.DbAdapter mParent>;

        $r5 = staticinvoke <cn.hi321.browser.model.DbAdapter: android.content.Context access$0(cn.hi321.browser.model.DbAdapter)>($r4);

        $r11 = interfaceinvoke $r8.<android.database.Cursor: java.lang.String getString(int)>($i2);

        $r12 = staticinvoke <cn.hi321.browser.utils.DateUtils: java.util.Date convertFromDatabase(android.content.Context,java.lang.String)>($r5, $r11);

     label19:
        r2 = newarray (java.lang.Object)[6];

     label20:
        $r11 = interfaceinvoke $r8.<android.database.Cursor: java.lang.String getString(int)>($i0);

        r2[0] = $r11;

        $r11 = interfaceinvoke $r8.<android.database.Cursor: java.lang.String getString(int)>($i1);

        r2[1] = $r11;

        $i4 = interfaceinvoke $r8.<android.database.Cursor: int getInt(int)>($i3);

        $r13 = staticinvoke <java.lang.Integer: java.lang.Integer valueOf(int)>($i4);

        r2[2] = $r13;

        $l5 = virtualinvoke $r12.<java.util.Date: long getTime()>();

        $r14 = staticinvoke <java.lang.Long: java.lang.Long valueOf(long)>($l5);

        r2[3] = $r14;

        $l5 = virtualinvoke $r12.<java.util.Date: long getTime()>();

        $r14 = staticinvoke <java.lang.Long: java.lang.Long valueOf(long)>($l5);

        r2[4] = $r14;

        $r13 = staticinvoke <java.lang.Integer: java.lang.Integer valueOf(int)>(1);

        r2[5] = $r13;

        virtualinvoke r6.<android.database.MatrixCursor: void addRow(java.lang.Object[])>(r2);

        interfaceinvoke $r8.<android.database.Cursor: boolean moveToNext()>();

     label21:
        goto label10;

     label22:
        r3 := @caughtexception;

        $r15 = new java.lang.StringBuilder;

        specialinvoke $r15.<java.lang.StringBuilder: void <init>(java.lang.String)>("Export of old bookmarks failed: ");

        $r11 = virtualinvoke r3.<java.lang.Exception: java.lang.String getMessage()>();

        $r15 = virtualinvoke $r15.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r11);

        $r11 = virtualinvoke $r15.<java.lang.StringBuilder: java.lang.String toString()>();

        staticinvoke <android.util.Log: int i(java.lang.String,java.lang.String)>("DbAdapter", $r11);

        goto label17;

        catch java.lang.Exception from label01 to label02 with label22;
        catch java.lang.Exception from label03 to label04 with label22;
        catch java.lang.Exception from label05 to label06 with label22;
        catch java.lang.Exception from label07 to label08 with label22;
        catch java.lang.Exception from label09 to label11 with label22;
        catch java.lang.Exception from label12 to label13 with label22;
        catch java.lang.Exception from label14 to label15 with label22;
        catch java.lang.Exception from label16 to label17 with label22;
        catch java.lang.Exception from label18 to label19 with label22;
        catch java.lang.Exception from label20 to label21 with label22;
    }

    public void onCreate(android.database.sqlite.SQLiteDatabase)
    {
        cn.hi321.browser.model.DbAdapter $r2;
        cn.hi321.browser.model.DbAdapter$DatabaseHelper r0;
        android.database.sqlite.SQLiteDatabase $r1;

        r0 := @this: cn.hi321.browser.model.DbAdapter$DatabaseHelper;

        $r1 := @parameter0: android.database.sqlite.SQLiteDatabase;

        virtualinvoke $r1.<android.database.sqlite.SQLiteDatabase: void execSQL(java.lang.String)>("CREATE TABLE ADBLOCK_WHITELIST (_id INTEGER PRIMARY KEY AUTOINCREMENT, url TEXT NOT NULL);");

        virtualinvoke $r1.<android.database.sqlite.SQLiteDatabase: void execSQL(java.lang.String)>("CREATE TABLE MOBILE_VIEW_URL (_id INTEGER PRIMARY KEY AUTOINCREMENT, url TEXT NOT NULL);");

        $r2 = r0.<cn.hi321.browser.model.DbAdapter$DatabaseHelper: cn.hi321.browser.model.DbAdapter mParent>;

        $r2.<cn.hi321.browser.model.DbAdapter: boolean mAdBlockListNeedPopulate> = 1;

        return;
    }

    public void onUpgrade(android.database.sqlite.SQLiteDatabase, int, int)
    {
        android.database.sqlite.SQLiteDatabase $r1;
        int $i0, $i1;
        cn.hi321.browser.model.DbAdapter $r2;
        cn.hi321.browser.model.DbAdapter$DatabaseHelper r0;

        r0 := @this: cn.hi321.browser.model.DbAdapter$DatabaseHelper;

        $r1 := @parameter0: android.database.sqlite.SQLiteDatabase;

        $i0 := @parameter1: int;

        $i1 := @parameter2: int;

        staticinvoke <android.util.Log: int d(java.lang.String,java.lang.String)>("DbAdapter", "Upgrading database.");

        lookupswitch($i0)
        {
            case 1: goto label2;
            case 2: goto label2;
            case 3: goto label2;
            case 4: goto label3;
            case 5: goto label4;
            default: goto label1;
        };

     label1:
        return;

     label2:
        virtualinvoke $r1.<android.database.sqlite.SQLiteDatabase: void execSQL(java.lang.String)>("CREATE TABLE ADBLOCK_WHITELIST (_id INTEGER PRIMARY KEY AUTOINCREMENT, url TEXT NOT NULL);");

        $r2 = r0.<cn.hi321.browser.model.DbAdapter$DatabaseHelper: cn.hi321.browser.model.DbAdapter mParent>;

        $r2.<cn.hi321.browser.model.DbAdapter: boolean mAdBlockListNeedPopulate> = 1;

     label3:
        virtualinvoke $r1.<android.database.sqlite.SQLiteDatabase: void execSQL(java.lang.String)>("CREATE TABLE MOBILE_VIEW_URL (_id INTEGER PRIMARY KEY AUTOINCREMENT, url TEXT NOT NULL);");

     label4:
        specialinvoke r0.<cn.hi321.browser.model.DbAdapter$DatabaseHelper: void exportOldBookmarks(android.database.sqlite.SQLiteDatabase)>($r1);

        virtualinvoke $r1.<android.database.sqlite.SQLiteDatabase: void execSQL(java.lang.String)>("DROP TABLE IF EXISTS BOOKMARKS;");

        virtualinvoke $r1.<android.database.sqlite.SQLiteDatabase: void execSQL(java.lang.String)>("DROP TABLE IF EXISTS HISTORY;");

        return;
    }
}
